## HTTP 상태 코드

### 상태 코드 : 클라이언트가 보낸 요청의 처리 상태를 응답에서 알려주는 기능
- 1xx (informational) : 요청이 수신되어 처리중 (거의 사용 X)
- 2xx (Successful) : 요청 정상 처리
- 3xx (Redirection) : 요청을 완료하려면 추가 행동이 필요
- 4xx (Client Error) : 클라이언트 오류, 잘못된 문법 등으로 서버가 요청을 수행할 수 없음
- 5xx (Server Error) : 서버 오류, 서버가 요청을 정상 처리 못함

### 200
- 200 : 요청 성공
- 201 : 요청을 성공해서 새로운 리소스가 생성됨
- 204 : 요청을 성공적으로 수행했지만, 응답 페이로드 본문에 보낼 데이터가 없음
    - ex : save 버튼 클릭

### 300
요청을 완료하기 위해 유저 에이전트의 추가 조치 필요
- 영구 리다이렉션 : 특정 리소스의 URI가 영구적으로 이동
    - `/members` -> `/users`
- 일시 리다이렉션 : 일시적인 변경
    - 주문 완료 후 주문 내역 화면으로 이동
    - PRG : `POST/Redirect/**`
- 특수 리다이렉션
    - 결과 대신 캐시를 사용

#### 영구 리다이렉션
- 리소스 URI가 영구적으로 이동
- 원래의 URL 사용 X, 검색 엔진 등에서도 변경 인지
- **301 Moved Permanently**
    - 리다이렉트시 요청 메서드가 **GET**으로 변하고, 본문이 제거될 수 있음
- **308 Permanent Redirect**
    - 301과 기능이 같음
    - 리다이렉트시 요청 메서드와 본문 유지 (처음 POST를 보내면 리다이렉트로 POST)

#### 일시적인 리다이렉션
- 리소스의 URI가 일시적으로 변경
- 따라서 검색 엔진 등에서 URL을 변경하면 안됨
- **302 FOUND**
    - 리다이렉트시 요청 메서드가 GET으로 변하고, 본문이 제거될 수 있음
    - 대부분 웹은 이걸로 처리
- **307 Temporary Redirect**
    - 302와 같은 기능
    - 리다이렉트시 요청 메서드와 본문 유지(요청 메서드를 변경하면 안됨)
- **303 See Other**
    - 302와 같은 기능
    - 리다이렉트시 요청 메서드가 GET으로 변경
- **304 Not Modified**
    - 캐시를 목적으로 사용
    - 클라이언트에게 리소스가 수정되지 않았음을 알려줌. 따라서 클라이언트는 로컬 PC에 저장된 캐시를 재사용 (캐시로 리다이렉트)
    - 304 응답은 응답에 메세지 바디를 포함하면 안됨 (로컬 캐시를 사용해야 하므로)
    - 조건부 **GET**, **HEAD** 요청시 사용

#### PRG : Post/Redirect/Get
- POST로 주문후에 웹 브라우저를 새로고침 하면?
    - 새로고침은 다시 요청
    - 중복 주문이 될 수 있음
- 원칙적으로는 (동일한) 주문 번호를 사용할 수 없게 막아야함
- 클라이언트 사이드에서 위의 상황을 방지하려면 일시적 리다이렉션을 사용
    - POST로 주문 후, 새로고침으로 인한 중복 주문 방지
    - POST로 주문 후, 주문 결과 화면을 **GET** 메서드로 리다이렉트
    - 새로고침해도 결과 화면을 **GET**으로 조회
    - 중복 주문 대신 결과 화면만 **GET**으로 다시 요청
- PRG 이후 리다이렉트로 인해, 새로고침해도 **GET**으로 결과 화면만 조회
- 참고 이미지
![PRG](https://github.com/Astrid-DM/Computer-Science/blob/main/WEB/Image_Folder/PRG.png?raw=true)

### 4XX (Client Error)
- 오류의 원인이 클라이언트에 있음 (ex : 잘못된 문법, URI)
- **400 Bad Request**
    - 요청 구문, 메세지 등등 오류 (ex : 요청 파라미터가 잘못됐거나, API 스펙이 맞지 않을때)
- **401 Unauthorized**
    - 인증(Authentication) 되지 않음
- **403 Forbidden**
    - 인증 자격은 있으나, 접근 권한이 불충분한 경우
    - ex : 어드민 등급이 아닌 사용자가 로그인 했지만, 어드민 등급의 리소스에 접근하는 경우
- **404 Not Found**
    - 요청 리소스가 서버에 없음
    - 또는 클라이언트가 권하닝 부족한 리소스에 접근할 때 해당 리소스를 숨기고 싶을 때

### 5XX (Server Error)
- 서버 문제로 오류 발생
- 서버에 문제가 있기 때문에 재시도 하면 성공할 수도 있음 (서버가 복구될 경우)
- **500 Internal Server Error**
    - 서버 내부 문제로 오류 발생
    - 애매하면 보통 500 에러 리턴
- **503 Service Unavailable**
    - 서버가 일시적으로 과부하, 또는 예정된 작업으로 잠시 요청을 처리할 수 없음
    - Retry-After 헤더 필드로 얼마뒤에 복구되는지 보낼 수도 있음
